{% extends 'base.html' %}
{% block content %}
<h1>{{company.juridical_name}}</h1>
<h2 style="display: inline-block">Status:</h2>

{% if company.is_approved %}
    <h2 style="display: inline-block; color: gray">Approved</h2>
{% else %}
    <h2 style="display: inline-block; color: orange">Not approved</h2>
{%endif%}

<input id="id" value="{{company.id}}" hidden="hidden"/>
<input id="owner" value="{{company.owner_id}}" hidden="hidden"/>

<h2>Common information</h2>

<div>
    <label>
        Juridical name
        <div>
            <input value="{{company.juridical_name}}" disabled>
        </div>
    </label>
</div>

<div>
    <label>
        Form
        <div>
            <input value="{{company.form}}" disabled>
        </div>
    </label>
</div>

<div>
    <label>
        Street, house, apartment / office
        <div>
            <input value="{{company.street_house_apartment}}" disabled>
        </div>
    </label>
</div>

<div>
    <label>
        City
        <div>
            <input value="{{company.city}}" disabled>
        </div>
    </label>
</div>

<div>
    <label>
        Region
        <div>
            <input value="{{company.region}}" disabled>
        </div>
    </label>
</div>

<div>
    <label>
        Country
        <div>
            <input value="{{company.country}}" disabled>
        </div>
    </label>
</div>

<div>
    <label>
        Postal code
        <div>
            <input value="{{company.postal_code}}" disabled>
        </div>
    </label>
</div>

<div>
    <label>
        Notification email
        <div>
            <input value="{{company.notification_email}}" disabled>
        </div>
    </label>
</div>

<h2>Payment information</h2>

<div>
    <label>
        BIC
        <div>
            <input value="{{company.bic}}" disabled>
        </div>
    </label>
</div>

<div>
    <label>
        Bank address
        <div>
            <input value="{{company.bank_address}}" disabled>
        </div>
    </label>
</div>

<div>
    <label>
        Bank account number
        <div>
            <input value="{{company.bank_account_number}}" disabled>
        </div>
    </label>
</div>

<h2>Manage</h2>

<label>
    Is company currently approved:
    <input type="checkbox" {% if company.is_approved %} checked {% endif %} onclick="approving(this.checked)">
</label>

<script>
    function approving(value) {
        const id = document.getElementById("id").value

        fetch(`http://localhost:8000/api/v1/companies/${id}/approve/`, {
            method: 'PATCH',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({
                is_approved: value,
            }),
        }).then(async response => location.reload())
    }
</script>
{% endblock %}